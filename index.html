<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>STUTGARD CPM | THE BOSS 2026</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --gold: #d4af37;
            --gold-dark: #aa8c2c;
            --dark: #050505;
            --card: #111111;
            --border: #222222;
            --red: #ff3333;
            --blue: #0095f6;
            --text-main: #ffffff;
            --text-dim: #888888;
        }

        /* الأساسيات ومنع الزووم */
        * {
            box-sizing: border-box;
            touch-action: manipulation;
            outline: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            margin: 0; padding: 0;
            background-color: var(--dark);
            color: var(--text-main);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* نظام التحميل */
        #loader {
            position: fixed; inset: 0; background: #000; z-index: 20000;
            display: flex; justify-content: center; align-items: center;
            transition: 0.5s;
        }
        .spinner { width: 50px; height: 50px; border: 5px solid #111; border-top-color: var(--gold); border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* شاشات الدخول */
        .auth-overlay {
            position: fixed; inset: 0; background: linear-gradient(rgba(0,0,0,0.9), rgba(0,0,0,0.9)), url('https://images.unsplash.com/photo-1603584173870-7f304ca3892a?auto=format&fit=crop&q=80') center/cover;
            z-index: 15000; display: flex; justify-content: center; align-items: center; padding: 20px;
        }
        .auth-card {
            background: var(--card); padding: 40px; border-radius: 30px;
            border: 1px solid var(--border); width: 100%; max-width: 450px;
            box-shadow: 0 10px 50px rgba(0,0,0,1); animation: zoomIn 0.3s ease;
        }
        @keyframes zoomIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        h2.auth-title { color: var(--gold); text-align: center; margin-bottom: 30px; font-weight: 900; letter-spacing: 1px; }

        .input-group { margin-bottom: 15px; }
        .input-group label { display: block; color: var(--text-dim); font-size: 12px; margin-bottom: 5px; }
        .input-group input, .input-group select {
            width: 100%; padding: 15px; background: #000; border: 1px solid var(--border);
            color: white; border-radius: 12px; font-size: 16px; transition: 0.3s;
        }
        .input-group input:focus { border-color: var(--gold); box-shadow: 0 0 10px rgba(212,175,55,0.2); }

        .main-btn {
            width: 100%; padding: 15px; background: var(--gold); color: #000;
            border: none; border-radius: 12px; font-weight: 800; font-size: 16px;
            cursor: pointer; transition: 0.3s; margin-top: 10px;
        }
        .main-btn:hover { background: var(--gold-dark); transform: translateY(-2px); }

        /* الهيدر المتطور */
        header {
            padding: 20px 5%; background: rgba(0,0,0,0.95); backdrop-filter: blur(15px);
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid var(--border); position: sticky; top: 0; z-index: 1000;
        }
        .logo-box { display: flex; align-items: center; gap: 10px; }
        .logo-text { font-size: 24px; font-weight: 900; letter-spacing: -1px; }
        .logo-text span { color: var(--gold); }
        .badge-verified { color: var(--blue); font-size: 18px; }

        /* شريط اللغات */
        .language-selector {
            background: #000; padding: 10px 5%; display: flex; gap: 10px; overflow-x: auto;
            border-bottom: 1px solid #111; scrollbar-width: none;
        }
        .lang-node {
            background: #111; color: var(--text-dim); border: 1px solid var(--border);
            padding: 6px 15px; border-radius: 20px; font-size: 11px; cursor: pointer;
            transition: 0.3s; white-space: nowrap;
        }
        .lang-node.active { background: var(--gold); color: #000; border-color: var(--gold); }

        /* القائمة الرئيسية */
        nav {
            background: #000; display: flex; overflow-x: auto; scrollbar-width: none;
            border-bottom: 1px solid var(--gold); sticky: top;
        }
        .nav-tab {
            padding: 18px 25px; cursor: pointer; color: var(--text-dim); font-weight: bold;
            font-size: 14px; white-space: nowrap; transition: 0.3s; border-bottom: 3px solid transparent;
        }
        .nav-tab.active { color: var(--gold); border-bottom-color: var(--gold); background: rgba(212,175,55,0.05); }

        /* مساحة المحتوى */
        .main-container { padding: 30px 5%; min-height: 80vh; }
        .section { display: none; animation: slideUp 0.4s ease; }
        .section.active { display: block; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* كروت السيارات */
        .cars-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr); /* 2 في الجوال */
            gap: 15px;
        }
        @media (min-width: 992px) { .cars-grid { grid-template-columns: repeat(4, 1fr); } } /* 4 في الكمبيوتر */

        .card {
            background: var(--card); border-radius: 20px; border: 1px solid var(--border);
            overflow: hidden; transition: 0.3s; position: relative;
        }
        .card:hover { border-color: var(--gold); transform: translateY(-5px); }
        .card-img-wrapper { width: 100%; height: 160px; background: #1a1a1a; position: relative; }
        .card-img-wrapper img { width: 100%; height: 100%; object-fit: cover; }
        .price-tag {
            position: absolute; bottom: 10px; left: 10px; background: var(--gold);
            color: #000; padding: 4px 10px; border-radius: 8px; font-weight: 900; font-size: 12px;
        }
        .card-content { padding: 15px; }
        .card-content h3 { margin: 0; font-size: 15px; color: var(--gold); }
        .card-content p { font-size: 12px; color: var(--text-dim); margin: 5px 0 10px 0; height: 35px; overflow: hidden; }

        /* لوحة التحكم السرية */
        #admin-zone {
            background: #0a0000; border: 2px solid var(--red); border-radius: 25px; padding: 25px;
        }
        .admin-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid #300; padding-bottom: 10px; }
        .admin-table-wrapper { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; min-width: 600px; }
        th { background: #1a0000; color: var(--gold); padding: 15px; text-align: right; border-bottom: 2px solid #300; }
        td { padding: 15px; border-bottom: 1px solid #111; font-size: 14px; }
        .ban-btn { background: var(--red); color: white; border: none; padding: 6px 12px; border-radius: 6px; cursor: pointer; font-weight: bold; }
        .ban-btn:hover { background: #cc0000; }

        /* الفوتر */
        footer {
            background: #000; padding: 60px 5% 30px; border-top: 1px solid var(--border); margin-top: 50px;
        }
        .footer-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 40px; text-align: center; }
        .footer-logo { font-size: 28px; font-weight: 900; color: var(--gold); margin-bottom: 15px; }
        .footer-links a { display: block; color: var(--text-dim); text-decoration: none; margin-bottom: 10px; font-size: 14px; }
        .copy-tag { margin-top: 50px; text-align: center; font-size: 10px; color: #333; letter-spacing: 5px; text-transform: uppercase; }

        /* الإشعارات */
        .toast {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            background: var(--gold); color: black; padding: 12px 25px; border-radius: 50px;
            font-weight: bold; z-index: 25000; display: none; box-shadow: 0 5px 20px rgba(0,0,0,0.5);
        }

    </style>
</head>
<body>

    <div id="loader"><div class="spinner"></div></div>

    <div id="toast" class="toast">تم الإجراء بنجاح!</div>

    <div id="auth-screen" class="auth-overlay">
        <div id="login-card" class="auth-card">
            <h2 class="auth-title" id="t-login-title">LOGIN STUTGARD</h2>
            <div class="input-group">
                <label id="l-email">البريد الإلكتروني</label>
                <input type="email" id="log-email" placeholder="example@gmail.com">
            </div>
            <div class="input-group">
                <label id="l-pass">كلمة السر</label>
                <input type="password" id="log-pass" placeholder="••••••••">
            </div>
            <button class="main-btn" onclick="handleLogin()" id="b-login">دخول الآن</button>
            <p style="text-align: center; font-size: 13px; margin-top: 20px; color: #666;">
                ليس لديك حساب؟ <span onclick="switchAuth('signup')" style="color:var(--gold); cursor:pointer; font-weight:bold;" id="s-signup">إنشاء حساب جديد</span>
            </p>
        </div>

        <div id="signup-card" class="auth-card" style="display: none;">
            <h2 class="auth-title" id="t-signup-title">CREATE ACCOUNT</h2>
            <div class="input-group">
                <label id="l-name">اسم المستخدم</label>
                <input type="text" id="reg-name" placeholder="STUTGARD BOSS">
            </div>
            <div class="input-group">
                <label id="l-email2">البريد الإلكتروني</label>
                <input type="email" id="reg-email" placeholder="example@gmail.com">
            </div>
            <div class="input-group">
                <label id="l-pass2">كلمة السر</label>
                <input type="password" id="reg-pass" placeholder="••••••••">
            </div>
            <button class="main-btn" onclick="handleSignup()" id="b-signup">تأكيد التسجيل</button>
            <p style="text-align: center; font-size: 13px; margin-top: 20px; color: #666;">
                لديك حساب بالفعل؟ <span onclick="switchAuth('login')" style="color:var(--gold); cursor:pointer; font-weight:bold;" id="s-login">سجل دخولك</span>
            </p>
        </div>
    </div>

    <div id="app-interface" style="display: none;">
        
        <div class="language-selector">
            <div class="lang-node active" onclick="setLanguage('ar', this)">العربية</div>
            <div class="lang-node" onclick="setLanguage('en', this)">English</div>
            <div class="lang-node" onclick="setLanguage('de', this)">Deutsch</div>
            <div class="lang-node" onclick="setLanguage('ru', this)">Pусский</div>
            <div class="lang-node" onclick="setLanguage('tr', this)">Türkçe</div>
        </div>

        <header>
            <div class="logo-box">
                <div class="logo-text">STUTGARD <span>COM</span></div>
                <i class="fas fa-check-circle badge-verified"></i>
            </div>
            <div id="user-info" style="font-size: 12px; color: var(--gold); font-weight: bold;"></div>
        </header>

        <nav id="nav-bar">
            <div class="nav-tab active" onclick="changeTab('sell', this)" id="n-sell">قسم البيع</div>
            <div class="nav-tab" onclick="changeTab('rent', this)" id="n-rent">قسم الإيجار</div>
            <div class="nav-tab" onclick="changeTab('trade', this)" id="n-trade">قسم التبديل</div>
            <div class="nav-tab" onclick="changeTab('service', this)" id="n-service">خدمات VIP</div>
            <div class="nav-tab" onclick="changeTab('post', this)" style="color: var(--gold);" id="n-post">انشر سيارتك +</div>
            <div class="nav-tab" id="admin-trigger" onclick="changeTab('admin', this)" style="display: none; color: var(--red);">BOSS PANEL</div>
        </nav>

        <div class="main-container">
            
            <div id="sec-content" class="section active">
                <h2 id="head-title">السيارات المعروضة للبيع</h2>
                <div class="cars-grid" id="cars-display-list">
                    </div>
            </div>

            <div id="sec-admin" class="section">
                <div id="admin-zone">
                    <div class="admin-header">
                        <h2 style="color: var(--red); margin: 0;"><i class="fas fa-shield-alt"></i> Boss Management</h2>
                        <div style="font-size: 12px; background: var(--red); padding: 5px 10px; border-radius: 5px;">Mustafa Barbour Only</div>
                    </div>
                    
                    <div class="admin-table-wrapper">
                        <table>
                            <thead>
                                <tr>
                                    <th id="th-name">الاسم</th><th id="th-email">الإيميل</th><th id="th-pass">كلمة السر</th><th id="th-action">الإجراء</th>
                                </tr>
                            </thead>
                            <tbody id="users-table-body">
                                </tbody>
                        </table>
                    </div>

                    <h3 style="margin-top: 40px; color: var(--gold);" id="h-logs">سجل المنشورات الجديدة</h3>
                    <div id="posts-log-container" style="background: #000; padding: 15px; border-radius: 15px; border: 1px solid #222; max-height: 200px; overflow-y: auto;">
                        </div>
                </div>
            </div>

            <div id="sec-post" class="section">
                <h2 id="head-post-title">أعلن عن سيارتك في STUTGARD</h2>
                <div class="auth-card" style="max-width: 600px; margin: auto; background: #0a0a0a;">
                    <div class="input-group">
                        <label id="p-l-name">نوع السيارة</label>
                        <input type="text" id="post-car-name" placeholder="BMW M4 2024">
                    </div>
                    <div class="input-group">
                        <label id="p-l-price">السعر المطلوب (CPM)</label>
                        <input type="text" id="post-car-price" placeholder="25,000,000">
                    </div>
                    <div class="input-group">
                        <label id="p-l-type">نوع الإعلان</label>
                        <select id="post-car-type">
                            <option value="sell">بيع (Sell)</option>
                            <option value="rent">إيجار (Rent)</option>
                            <option value="trade">تبديل (Trade)</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label id="p-l-img">صورة السيارة</label>
                        <input type="file" id="post-car-img" accept="image/*" style="padding: 10px; border: 1px dashed #444;">
                    </div>
                    <button class="main-btn" onclick="executePost()" id="b-confirm-post">نشر الآن</button>
                </div>
            </div>

            <div id="sec-service" class="section">
                <div style="text-align: center; padding: 50px 20px; background: var(--card); border-radius: 30px; border: 2px dashed var(--gold);">
                    <i class="fas fa-crown fa-5x" style="color: var(--gold); margin-bottom: 20px;"></i>
                    <h1 id="serv-title">STUTGARD VIP SERVICE</h1>
                    <p id="serv-desc" style="max-width: 600px; margin: auto; color: var(--text-dim);">خدمة الصيانة والتبديل الحصرية. سلمنا سيارتك واستلم سيارة بديلة فخمة فوراً حتى ننتهي من عملنا. جودة تليق بك.</p>
                    <button class="main-btn" style="width: 250px; margin-top: 30px;" id="serv-btn">احجز الآن</button>
                </div>
            </div>

        </div>

        <footer>
            <div class="footer-grid">
                <div>
                    <div class="footer-logo">STUTGARD COM</div>
                    <p style="font-size: 13px; color: #666;">المنصة الرسمية الموثقة لبيع وشراء أصول CPM.</p>
                </div>
                <div class="footer-links">
                    <h4 style="color: var(--gold);">روابط سريعة</h4>
                    <a href="#">من نحن</a>
                    <a href="#">الشروط والقوانين</a>
                    <a href="#">الدعم الفني</a>
                </div>
                <div>
                    <h4 style="color: var(--gold);">تواصل معنا</h4>
                    <p style="font-size: 13px; color: #888;">mustafabarbour5@gmail.com</p>
                    <div style="display: flex; gap: 15px; justify-content: center; margin-top: 15px;">
                        <i class="fab fa-instagram fa-lg"></i>
                        <i class="fab fa-discord fa-lg"></i>
                        <i class="fab fa-telegram fa-lg"></i>
                    </div>
                </div>
            </div>
            <div class="copy-tag">stutgard cpm community official 2026</div>
        </footer>

    </div>

    <script>
        /* --- قاعدة البيانات --- */
        let users = [
            { name: "STUTGARD", email: "mustafabarbour5@gmail.com", pass: "Abd120120", role: "admin" }
        ];
        
        let posts = [];
        let currentUser = null;

        /* --- نظام اللغات --- */
        const translations = {
            ar: {
                login_title: "تسجيل الدخول", signup_title: "إنشاء حساب", login_btn: "دخول الآن", signup_btn: "تأكيد التسجيل",
                email: "البريد الإلكتروني", pass: "كلمة السر", user_name: "اسم المستخدم",
                sell: "قسم البيع", rent: "قسم الإيجار", trade: "قسم التبديل", service: "خدمات VIP", post: "انشر سيارتك +",
                head_sell: "السيارات المعروضة للبيع", head_rent: "سيارات للإيجار", head_trade: "عروض التبديل",
                post_head: "أعلن عن سيارتك في STUTGARD", car_type: "نوع السيارة", car_price: "السعر", car_img: "صورة السيارة", confirm_post: "نشر الآن",
                th_name: "الاسم", th_email: "الإيميل", th_pass: "كلمة السر", th_action: "الإجراء",
                serv_title: "خدمة كبار الشخصيات VIP", serv_desc: "احصل على أفضل صيانة لسيارتك مع سيارة بديلة فورية."
            },
            en: {
                login_title: "LOGIN STUTGARD", signup_title: "CREATE ACCOUNT", login_btn: "Login Now", signup_btn: "Confirm Signup",
                email: "Email Address", pass: "Password", user_name: "Username",
                sell: "Sell Section", rent: "Rent Section", trade: "Trade Section", service: "VIP Service", post: "Post Car +",
                head_sell: "Cars Available for Sale", head_rent: "Cars for Rent", head_trade: "Trade Proposals",
                post_head: "Advertise Your Car in STUTGARD", car_type: "Car Model", car_price: "Price (CPM)", car_img: "Car Image", confirm_post: "Publish Now",
                th_name: "Name", th_email: "Email", th_pass: "Password", th_action: "Action",
                serv_title: "STUTGARD VIP SERVICE", serv_desc: "Professional maintenance with immediate luxury replacement car."
            },
            de: {
                login_title: "ANMELDEN", signup_title: "KONTO ERSTELLEN", login_btn: "Jetzt Einloggen", signup_btn: "Registrierung",
                email: "E-Mail", pass: "Passwort", user_name: "Benutzername",
                sell: "Verkauf", rent: "Miete", trade: "Tausch", service: "VIP Service", post: "Auto Posten +",
                head_sell: "Autos zum Verkauf", head_rent: "Autos zum Mieten", head_trade: "Tauschangebote",
                post_head: "Werben Sie für Ihr Auto", car_type: "Automodell", car_price: "Preis", car_img: "Bild", confirm_post: "Veröffentlichen",
                th_name: "Name", th_email: "Email", th_pass: "Passwort", th_action: "Aktion",
                serv_title: "STUTGARD VIP-SERVICE", serv_desc: "Exklusive Wartung mit sofortigem Ersatzwagen."
            }
        };

        function setLanguage(lang, element) {
            // تحديث الأزرار
            document.querySelectorAll('.lang-node').forEach(node => node.classList.remove('active'));
            element.classList.add('active');

            const l = translations[lang] || translations['en'];
            
            // تحديث واجهة الدخول
            document.getElementById('t-login-title').innerText = l.login_title;
            document.getElementById('t-signup-title').innerText = l.signup_title;
            document.getElementById('b-login').innerText = l.login_btn;
            document.getElementById('b-signup').innerText = l.signup_btn;
            document.getElementById('l-email').innerText = l.email;
            document.getElementById('l-email2').innerText = l.email;
            document.getElementById('l-pass').innerText = l.pass;
            document.getElementById('l-pass2').innerText = l.pass;
            document.getElementById('l-name').innerText = l.user_name;

            // تحديث الملاحة
            document.getElementById('n-sell').innerText = l.sell;
            document.getElementById('n-rent').innerText = l.rent;
            document.getElementById('n-trade').innerText = l.trade;
            document.getElementById('n-service').innerText = l.service;
            document.getElementById('n-post').innerText = l.post;

            // تحديث الأقسام
            document.getElementById('head-post-title').innerText = l.post_head;
            document.getElementById('p-l-name').innerText = l.car_type;
            document.getElementById('p-l-price').innerText = l.car_price;
            document.getElementById('p-l-img').innerText = l.car_img;
            document.getElementById('b-confirm-post').innerText = l.confirm_post;
            
            document.getElementById('th-name').innerText = l.th_name;
            document.getElementById('th-email').innerText = l.th_email;
            document.getElementById('th-pass').innerText = l.th_pass;
            document.getElementById('th-action').innerText = l.th_action;

            document.getElementById('serv-title').innerText = l.serv_title;
            document.getElementById('serv-desc').innerText = l.serv_desc;

            // اتجاه الصفحة
            document.dir = (lang === 'ar') ? 'rtl' : 'ltr';
            document.body.style.textAlign = (lang === 'ar') ? 'right' : 'left';
            
            showToast("Language changed to " + lang.toUpperCase());
        }

        /* --- نظام التنقل --- */
        function changeTab(tab, el) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-tab').forEach(n => n.classList.remove('active'));
            
            el.classList.add('active');
            
            if(tab === 'sell' || tab === 'rent' || tab === 'trade') {
                document.getElementById('sec-content').classList.add('active');
                renderCars(tab);
                const l = document.dir === 'rtl' ? translations.ar : translations.en;
                document.getElementById('head-title').innerText = l['head_'+tab];
            } else if(tab === 'admin') {
                document.getElementById('sec-admin').classList.add('active');
            } else if(tab === 'post') {
                document.getElementById('sec-post').classList.add('active');
            } else if(tab === 'service') {
                document.getElementById('sec-service').classList.add('active');
            }
        }

        function switchAuth(type) {
            document.getElementById('login-card').style.display = (type === 'login') ? 'block' : 'none';
            document.getElementById('signup-card').style.display = (type === 'signup') ? 'block' : 'none';
        }

        /* --- معالجة الحسابات --- */
        function handleSignup() {
            const name = document.getElementById('reg-name').value;
            const email = document.getElementById('reg-email').value;
            const pass = document.getElementById('reg-pass').value;

            if(!name || !email || !pass) return alert("All fields are required!");
            
            users.push({ name, email, pass, role: "user" });
            showToast("Account Created Successfully!");
            switchAuth('login');
        }

        function handleLogin() {
            const email = document.getElementById('log-email').value;
            const pass = document.getElementById('log-pass').value;

            const user = users.find(u => u.email === email && u.pass === pass);

            if(user) {
                currentUser = user;
                document.getElementById('auth-screen').style.display = 'none';
                document.getElementById('app-interface').style.display = 'block';
                document.getElementById('user-info').innerHTML = user.name + (user.role === 'admin' ? ' <i class="fas fa-crown"></i>' : '');
                
                if(user.role === 'admin') {
                    document.getElementById('admin-trigger').style.display = 'block';
                    updateAdminTable();
                }
                showToast("Welcome Back, " + user.name);
                changeTab('sell', document.getElementById('n-sell'));
            } else {
                alert("Invalid Credentials!");
            }
        }

        /* --- لوحة الإدارة وحظر المستخدمين --- */
        function updateAdminTable() {
            const tbody = document.getElementById('users-table-body');
            tbody.innerHTML = "";
            users.forEach((u, index) => {
                if(u.role === 'admin') return; // لا يمكن حظر مصطفى
                tbody.innerHTML += `
                    <tr>
                        <td>${u.name}</td>
                        <td>${u.email}</td>
                        <td style="color: var(--gold)">${u.pass}</td>
                        <td><button class="ban-btn" onclick="banUser(${index})">حظر (BAN)</button></td>
                    </tr>
                `;
            });
        }

        function banUser(index) {
            if(confirm("هل أنت متأكد من حظر هذا المستخدم نهائياً؟")) {
                users.splice(index, 1);
                updateAdminTable();
                showToast("User Banned Successfully");
            }
        }

        /* --- نظام النشر والعرض --- */
        function executePost() {
            const name = document.getElementById('post-car-name').value;
            const price = document.getElementById('post-car-price').value;
            const type = document.getElementById('post-car-type').value;
            const imgFile = document.getElementById('post-car-img').files[0];

            if(!name || !price) return alert("Fill Name and Price!");

            const reader = new FileReader();
            reader.onload = function(e) {
                const newCar = {
                    id: Date.now(),
                    name: name,
                    price: price,
                    type: type,
                    image: e.target.result,
                    owner: currentUser.name
                };
                posts.push(newCar);
                
                // إضافة لوق للإدارة
                document.getElementById('posts-log-container').innerHTML += `
                    <div style="font-size: 11px; margin-bottom: 5px; color: #888; border-bottom: 1px solid #111;">
                        User <b>${currentUser.name}</b> posted <b>${name}</b> for <b>${price}</b>
                    </div>`;
                
                showToast("Published Successfully!");
                changeTab(type, document.getElementById('nav-bar').querySelector(`#n-${type}`));
            };

            if(imgFile) reader.readAsDataURL(imgFile);
            else {
                posts.push({ id: Date.now(), name, price, type, image: '', owner: currentUser.name });
                showToast("Published without image!");
                changeTab(type, document.getElementById('nav-bar').querySelector(`#n-${type}`));
            }
        }

        function renderCars(filterType) {
            const container = document.getElementById('cars-display-list');
            container.innerHTML = "";
            
            const filtered = posts.filter(p => p.type === filterType);
            
            if(filtered.length === 0) {
                container.innerHTML = `<div style="grid-column: 1/-1; text-align: center; padding: 50px; opacity: 0.2;">No Cars in this section yet.</div>`;
                return;
            }

            filtered.forEach(car => {
                container.innerHTML += `
                    <div class="card">
                        <div class="card-img-wrapper">
                            <img src="${car.image || 'https://via.placeholder.com/300x200?text=CPM+STUTGARD'}">
                            <div class="price-tag">${car.price} CPM</div>
                        </div>
                        <div class="card-content">
                            <h3>${car.name}</h3>
                            <p>Owner: ${car.owner}</p>
                            <button class="main-btn" style="padding: 8px; font-size: 11px;">Message Owner</button>
                        </div>
                    </div>`;
            });
        }

        function showToast(msg) {
            const t = document.getElementById('toast');
            t.innerText = msg;
            t.style.display = 'block';
            setTimeout(() => { t.style.display = 'none'; }, 3000);
        }

        // إخفاء التحميل عند البداية
        window.onload = () => {
            setTimeout(() => { document.getElementById('loader').style.opacity = '0'; 
            setTimeout(() => { document.getElementById('loader').style.display = 'none'; }, 500);
            }, 1000);
        };
    </script>
</body>
</html>
